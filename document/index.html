<html class="fontawesome-i2svg-active fontawesome-i2svg-complete"><head>
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">

	<title>Document</title>

	<link href="https://fonts.googleapis.com/css?family=Roboto:regular,bold,italic,thin,light,bolditalic,black,medium&lang=vi" rel="stylesheet" type="text/css">

	<!-- Bootstrap CSS CDN -->
	<style type="text/css">svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1em}.svg-inline--fa.fa-stack-2x{height:2em;width:2em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}</style><style type="text/css">svg:not(:root).svg-inline--fa{overflow:visible}.svg-inline--fa{display:inline-block;font-size:inherit;height:1em;overflow:visible;vertical-align:-.125em}.svg-inline--fa.fa-lg{vertical-align:-.225em}.svg-inline--fa.fa-w-1{width:.0625em}.svg-inline--fa.fa-w-2{width:.125em}.svg-inline--fa.fa-w-3{width:.1875em}.svg-inline--fa.fa-w-4{width:.25em}.svg-inline--fa.fa-w-5{width:.3125em}.svg-inline--fa.fa-w-6{width:.375em}.svg-inline--fa.fa-w-7{width:.4375em}.svg-inline--fa.fa-w-8{width:.5em}.svg-inline--fa.fa-w-9{width:.5625em}.svg-inline--fa.fa-w-10{width:.625em}.svg-inline--fa.fa-w-11{width:.6875em}.svg-inline--fa.fa-w-12{width:.75em}.svg-inline--fa.fa-w-13{width:.8125em}.svg-inline--fa.fa-w-14{width:.875em}.svg-inline--fa.fa-w-15{width:.9375em}.svg-inline--fa.fa-w-16{width:1em}.svg-inline--fa.fa-w-17{width:1.0625em}.svg-inline--fa.fa-w-18{width:1.125em}.svg-inline--fa.fa-w-19{width:1.1875em}.svg-inline--fa.fa-w-20{width:1.25em}.svg-inline--fa.fa-pull-left{margin-right:.3em;width:auto}.svg-inline--fa.fa-pull-right{margin-left:.3em;width:auto}.svg-inline--fa.fa-border{height:1.5em}.svg-inline--fa.fa-li{width:2em}.svg-inline--fa.fa-fw{width:1.25em}.fa-layers svg.svg-inline--fa{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.fa-layers{display:inline-block;height:1em;position:relative;text-align:center;vertical-align:-.125em;width:1em}.fa-layers svg.svg-inline--fa{-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter,.fa-layers-text{display:inline-block;position:absolute;text-align:center}.fa-layers-text{left:50%;top:50%;-webkit-transform:translate(-50%,-50%);transform:translate(-50%,-50%);-webkit-transform-origin:center center;transform-origin:center center}.fa-layers-counter{background-color:#ff253a;border-radius:1em;-webkit-box-sizing:border-box;box-sizing:border-box;color:#fff;height:1.5em;line-height:1;max-width:5em;min-width:1.5em;overflow:hidden;padding:.25em;right:0;text-overflow:ellipsis;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-bottom-right{bottom:0;right:0;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom right;transform-origin:bottom right}.fa-layers-bottom-left{bottom:0;left:0;right:auto;top:auto;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:bottom left;transform-origin:bottom left}.fa-layers-top-right{right:0;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top right;transform-origin:top right}.fa-layers-top-left{left:0;right:auto;top:0;-webkit-transform:scale(.25);transform:scale(.25);-webkit-transform-origin:top left;transform-origin:top left}.fa-lg{font-size:1.33333em;line-height:.75em;vertical-align:-.0667em}.fa-xs{font-size:.75em}.fa-sm{font-size:.875em}.fa-1x{font-size:1em}.fa-2x{font-size:2em}.fa-3x{font-size:3em}.fa-4x{font-size:4em}.fa-5x{font-size:5em}.fa-6x{font-size:6em}.fa-7x{font-size:7em}.fa-8x{font-size:8em}.fa-9x{font-size:9em}.fa-10x{font-size:10em}.fa-fw{text-align:center;width:1.25em}.fa-ul{list-style-type:none;margin-left:2.5em;padding-left:0}.fa-ul>li{position:relative}.fa-li{left:-2em;position:absolute;text-align:center;width:2em;line-height:inherit}.fa-border{border:solid .08em #eee;border-radius:.1em;padding:.2em .25em .15em}.fa-pull-left{float:left}.fa-pull-right{float:right}.fa.fa-pull-left,.fab.fa-pull-left,.fal.fa-pull-left,.far.fa-pull-left,.fas.fa-pull-left{margin-right:.3em}.fa.fa-pull-right,.fab.fa-pull-right,.fal.fa-pull-right,.far.fa-pull-right,.fas.fa-pull-right{margin-left:.3em}.fa-spin{-webkit-animation:fa-spin 2s infinite linear;animation:fa-spin 2s infinite linear}.fa-pulse{-webkit-animation:fa-spin 1s infinite steps(8);animation:fa-spin 1s infinite steps(8)}@-webkit-keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}@keyframes fa-spin{0%{-webkit-transform:rotate(0);transform:rotate(0)}100%{-webkit-transform:rotate(360deg);transform:rotate(360deg)}}.fa-rotate-90{-webkit-transform:rotate(90deg);transform:rotate(90deg)}.fa-rotate-180{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.fa-rotate-270{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.fa-flip-horizontal{-webkit-transform:scale(-1,1);transform:scale(-1,1)}.fa-flip-vertical{-webkit-transform:scale(1,-1);transform:scale(1,-1)}.fa-flip-horizontal.fa-flip-vertical{-webkit-transform:scale(-1,-1);transform:scale(-1,-1)}:root .fa-flip-horizontal,:root .fa-flip-vertical,:root .fa-rotate-180,:root .fa-rotate-270,:root .fa-rotate-90{-webkit-filter:none;filter:none}.fa-stack{display:inline-block;height:2em;position:relative;width:2em}.fa-stack-1x,.fa-stack-2x{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0}.svg-inline--fa.fa-stack-1x{height:1em;width:1em}.svg-inline--fa.fa-stack-2x{height:2em;width:2em}.fa-inverse{color:#fff}.sr-only{border:0;clip:rect(0,0,0,0);height:1px;margin:-1px;overflow:hidden;padding:0;position:absolute;width:1px}.sr-only-focusable:active,.sr-only-focusable:focus{clip:auto;height:auto;margin:0;overflow:visible;position:static;width:auto}</style><link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">
	<!-- Our Custom CSS -->
	<link rel="stylesheet" href="style.css">

	<!-- Font Awesome JS -->
	<script src="assets/js/solid.js"></script>
	<script src="assets/js/fontawesome.js"></script>

</head>
<body>
<div class="wrapper">
	<!-- Sidebar  -->
	<nav id="sidebar" class="fixed-top active" style="margin-top: 56px; height: calc(calc(100vh) - calc(56px)); overflow: auto;">
		<ul class="list-unstyled components">
			<li>
				<a href="#installation">Installation</a>
			</li>
			<li>
				<a href="#authentication">Authenticationa</a>
			</li>
			<li>
				<a href="#middleware">Middleware</a>
			</li>
			<li>
				<a href="#file">File</a>
			</li>
		</ul>
	</nav>

	<nav class="navbar navbar-expand-lg navbar-light bg-light fixed-top" style="height: 56px; padding: 0 20px;">
		<div class="container-fluid">
			<button type="button" id="sidebarCollapse" class="btn btn-info">
				<svg class="svg-inline--fa fa-align-left fa-w-14" aria-hidden="true" data-prefix="fas" data-icon="align-left" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512" data-fa-i2svg=""><path fill="currentColor" d="M288 44v40c0 8.837-7.163 16-16 16H16c-8.837 0-16-7.163-16-16V44c0-8.837 7.163-16 16-16h256c8.837 0 16 7.163 16 16zM0 172v40c0 8.837 7.163 16 16 16h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16zm16 312h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm256-200H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16h256c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16z"></path></svg><!-- <i class="fas fa-align-left"></i> -->
			</button>
		</div>
	</nav>

	<!-- Page Content  -->
	<div id="content" style="margin-left: 250px">
		<div id="installation">
			<h2>Installation</h2>
			<div class="mt-5" style="margin-left: 40px;">
				<h5>
					Yêu cầu:
				</h5>
				<p style="font-size: .9em;">
					Gradle: >= 6.5
				</p>
			</div>

			<div class="mt-5">
				<p><strong>Bước 1:</strong> clone dự án về máy.</p>
				<p class="ml-5"><code>git clone https://github.com/toannguyen2/core_spring_boot.git</code></p>
			</div>

			<div class="mt-5">
				<p><strong>Bước 2:</strong> mở terminal chạy mã sau trong thư mục gốc của dự án vừa clone về.</p>
				<p class="ml-5"><code>gradle wrapper</code></p>
			</div>

			<div class="mt-5">
				<p><strong>Bước 3:</strong> Cấu hình environment theo hướng dẫn sau:</p>
				<p class="ml-5"><a href="https://codegym.vn/blog/2020/04/29/huong-dan-su-dung-environment-variable-trong-spring-boot/" style="color:#0a90e7">Hướng dẫn sử dụng environment variable trong Spring Boot</a></p>
			</div>

			<div class="mt-5">
				<p><strong>Bước 4:</strong> Thông tin đănh nhập cơ sở dữ liệu:</p>
				<p>
					mở tệp .env trong thư mục gốc của dự án, sửa thông tin đăng nhập database.
				</p>
				Ví dụ:
				<p class="ml-5">
					DB_DRIVER=com.mysql.cj.jdbc.Driver<br />
					DB_URL=jdbc:mysql://127.0.0.1:3306/blog_test?serverTimezone=UTC<br />
					DB_USERNAME=root<br />
					DB_PASSWORD=<br />
				</p>
			</div>

			<div class="line"></div>
		</div>
		<div id="authentication">
			<h2>Authenticationa</h2>
			<p>interface <code>Auth</code> khai báo các phương thức kiểm tra xác thực.  lớp triển khai <code>AuthInitializer</code></p>

			<p>Tiêm:</p>
<pre><code>@Autowired
private Auth auth;

</code></pre>

			<p>Kiểm tra đăng nhập:</p>
<pre><code>if(auth.check()){
	// đã đăng nhập
}else{
	// chưa đăng nhập
}

</code></pre>

			<p>Lấy thông tin người dùng:</p>
<pre><code>Users users = auth.user();

</code></pre>

			<p>Đăng xuất:</p>
			<pre><code>auth.logout();
</code></pre>


			<div class="line"></div>
		</div>
		<div id="middleware">
			<h2>Middleware</h2>
			<p>Middleware là phần trung gian nằm giữa client và controller, để kiểm tra request trước khi gọi controller, nhằm mục đích sử lý kịp thời và không cho phép controller sử lý.</p>

			<h5>Tạo middleware</h5>
			<p>Tạo class middleware trong package <code>c0320h1.app.middleware</code></p>
			<pre><code>public class Authenticate extends HandlerInterceptorAdapter {
	private String redirectTo = "/login";

	@Autowired
	private Auth auth;

	@Override
	public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler) throws Exception {
		if(!auth.check()){
			response.sendRedirect(redirectTo);
			return false;
		}
		return true;
	}
}

</code></pre>
<p>Method <code>preHandle()</code> trả về boolean với <kbd>true</kbd> là cho phép controller sử lý, <kbd>false</kbd> không cho phép controller sử lý</p>

			<br />
			<h5>Đăng ký middleware</h5>
			<p>Đăng ký middleware trong class <code>c0320h1.app.HttpMiddleware.java</code></p>
			<p>Để đăng ký middleware ta cần khai báo bean</p>
			<pre><code>@Bean
Authenticate authenticate() {
	return new Authenticate();
}
</code></pre>
			<p>Tiếp theo đăng ký middleware trong method <kbd>addInterceptors()</kbd></p>
			<pre><code>// Auth middleware
registry.addInterceptor(authenticate()).addPathPatterns(
	"/user/**/"
);
</code></pre>
			<p>Trong đó <code>"/user/**/"</code> có ý nghĩa: toàn bộ các dường dẫn của /user chỉ dành cho người dùng đã đăng nhập</p>


			<div class="line"></div>
		</div>
		<div id="file">
			<h2>File</h2>
			<h5>Upload File</h5>
			<pre><code>@PostMapping("/upload-file")
public String uploadFile(@RequestParam("file") UploadedFile file) {
...
}

</code></pre>

			<h5>Lưu file</h5>
			<pre><code>@PostMapping("/upload-file")
public String uploadFile(@RequestParam("file") UploadedFile file) {
	file.store("images/users/avatar");
}

</code></pre>

			<h5>Lưu file với tên tùy chọn</h5>
			<pre><code>file.store("images/users/avatar", "newnName.png");

</code></pre>

			<h5>Lưu file vào disk</h5>
			<p>Mặc định disk <code>public</code> được chọn.</p>
			<pre><code>file.disk("temp").store("images/users/avatar", "newnName.png");

</code></pre>
			<p>Trong đó <code>disk("temp")</code> là chọn thư mục <code>temp</code> làm nơi lưu trữ tập tin.</p>
			<br />
			<br />

			<h5>Download file</h5>
			<pre><code>@Autowired
    private Storage storage;

@GetMapping("/download/{filename:.+}")
@ResponseBody
public ResponseEntity&lt;Resource&gt; downloadFile(@PathVariable String filename) {
	String path = "images/users/avatar/" + filename;
    return storage.download(path);
}

</code></pre>
		</div>
</div>
</div>

<!-- jQuery CDN - Slim version (=without AJAX) -->
<script src="assets/js/jquery-3.1.1.min.js"></script>
<script src="assets/js/jquery-ui.min.js"></script>
<!-- Popper.JS -->
<script src="assets/js/popper.min.js"></script>
<!-- Bootstrap JS -->
<script src="assets/js/bootstrap.min.js"></script>

<script type="text/javascript">
    $(document).ready(function () {
        $('#sidebarCollapse').on('click', function () {
            $('#sidebar').toggleClass('active');
            if ($('#sidebar').hasClass("active")){
				console.log(true)
                $('#content').attr("style", "margin-left: 250px");
            }else{
                console.log(false)
	            $('#content').attr("style", null);

            }
        });

        var A_HEADER_HEIGHT = 82;
        let scrollElementIntoView = function(element, animationDuration, callback){
            animationDuration = animationDuration || 777;
            var destTop = $(element).offset().top - A_HEADER_HEIGHT;
            var callbackCalled = false;
            $('html, body').animate(
                {scrollTop: destTop},
                animationDuration, 'easeInOutExpo',
                function(){
                    if(!callbackCalled) callback();
                    callbackCalled = true;
                }
            );
        };

        $('a[href*=\\#]').click(function(e){
            var urlTester = document.createElement("a");
            urlTester.href = this.href;
            urlTester.hash = location.hash;
            var targetElement = document.getElementById(this.hash.substr(1));
            if(urlTester.href == location.href && targetElement){
                e.preventDefault();
                var wasID = targetElement.id;
                targetElement.id = "";
                scrollElementIntoView(targetElement, null, function(){
                    targetElement.id = wasID;
                });
            }
        });
    });
</script>
</body></html>
